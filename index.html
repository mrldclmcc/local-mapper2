<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>Local Territory Lookup</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --blue:#0288d1;
      --orange:#ff9800;
      --bg:#f7f9fc;
      --text:#1f2937;
      --border:#e5e7eb;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);padding:2rem;line-height:1.5}
    h1{font-weight:600;margin-bottom:.5rem}
    p{margin-bottom:1.5rem;color:#6b7280}
    .card{max-width:700px;margin:0 auto;background:#fff;border-radius:8px;padding:2rem;box-shadow:0 4px 12px rgba(0,0,0,.05)}
    label{font-weight:600;display:block;margin-bottom:.5rem}
    input[type=file]{width:100%;margin-bottom:1rem}
    textarea{width:100%;min-height:150px;padding:.75rem;border:1px solid var(--border);border-radius:4px;font-family:inherit;resize:vertical}
    button{margin-top:1rem;background:var(--blue);color:#fff;border:none;padding:.75rem 1.25rem;border-radius:4px;font-size:1rem;cursor:pointer;transition:background .2s}
    button:hover{background:#0277bd}
    #output{margin-top:2rem;white-space:pre-wrap;font-family:'Courier New',monospace;background:#f3f4f6;padding:1rem;border-radius:4px;overflow-x:auto;display:none}
    .fade{animation:fade .4s ease-in}
    @keyframes fade{from{opacity:0}to{opacity:1}}
    footer{text-align:center;margin-top:2rem;font-size:.875rem;color:#9ca3af}
  </style>
</head>
<body>
  <div class="card">
    <h1 style="color:var(--blue)">Local Territory Lookup</h1>
    <p>Paste TSV (from Excel) or upload a CSV that contains <strong>latitude</strong> and <strong>longitude</strong> columns.<br/>We’ll append a “Local” column with the territory name.</p>

    <label for="csvFile">Upload CSV</label>
    <input id="csvFile" type="file" accept=".csv,.txt"/>

    <label for="tsvPaste">…or paste TSV / CSV here</label>
    <textarea id="tsvPaste" placeholder="ID	Lat	Lng&#10;1	41.8888	-87.6523&#10;..."></textarea>

    <button onclick="run()">Process</button>

    <div id="output"></div>
  </div>

  <footer>Powered by <span style="color:var(--orange)">GeoJSON & Love</span></footer>

  <!-- libs -->
  <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://unpkg.com/turf@6/turf.min.js"></script>

  <!-- 100 % complete GeoJSON (localsmap.txt) -->
  <script>
    const locals = {"type":"FeatureCollection","name":"polygons","crs":{"type":"name","properties":{"name":"urn:ogc:def:crs:OGC:1.3:CRS84"}},"features":[{"type":"Feature","properties":{"name":"Local 6","styleUrl":"#line-A52714-7000-nodesc","stroke-opacity":1,"stroke":"#a52714","stroke-width":7},"geometry":{"type":"MultiPolygon","coordinates":[[[[-87.6306597,41.9622029,0],[-87.6622636,41.9614958,0],[-87.6691694,41.9615475,0],[-87.6688826,41.9532671,0],[-87.6686524,41.9448828,0],[-87.6685125,41.9421112,0],[-87.6685554,41.9386319,0],[-87.6683789,41.9357215,0],[-87.6682827,41.9331257,0],[-87.6682233,41.9302426,0],[-87.6681701,41.9278389,0],[-87.668034,41.9239662,0],[-87.6685808,41.9215222,0],[-87.6682857,41.9197198,0],[-87.6679638,41.9181847,0],[-87.6677277,41.9173463,0],[-87.6677652,41.9161366,0],[-87.6675403,41.9070411,0],[-87.6672613,41.8963799,0],[-87.6669367,41.8853116,0],[-87.6865216,41.8846247,0],[-87.6860166,41.8752547,0],[-87.6929708,41.8751577,0],[-87.6990217,41.8750933,0],[-87.7040438,41.8744239,0],[-87.7077792,41.8738792,0],[-87.7334968,41.8735442,0],[-87.735868,41.8728569,0],[-87.7382498,41.8717383,0],[-87.755032,41.8711582,0],[-87.7597314,41.8711228,0],[-87.7643451,41.8709274,0],[-87.7692002,41.8707775,0],[-87.7743098,41.8710621,0],[-87.7742911,41.8702199,0],[-87.774238,41.86962,0],[-87.7742124,41.8686494,0],[-87.7740966,41.8655099,0],[-87.7711271,41.8655728,0],[-87.7401439,41.8659615,0],[-87.7387823,41.8329587,0],[-87.7385769,41.8221788,0],[-87.7447616,41.8220908,0],[-87.7446586,41.8163178,0],[-87.7529757,41.8133988,0],[-87.7527327,41.8002468,0],[-87.7970397,41.7995068,0],[-87.8016246,41.7980538,0],[-87.800743,41.773778,0],[-87.7575025,41.7745742,0],[-87.7419963,41.7748474,0],[-87.741203,41.745616,0],[-87.7408436,41.7346088,0],[-87.6823844,41.73552,0],[-87.6820674,41.7231962,0],[-87.6817627,41.7135436,0],[-87.6916141,41.7135571,0],[-87.6915995,41.7071313,0],[-87.7012977,41.7069486,0],[-87.7013964,41.7061537,0],[-87.7110417,41.7059836,0],[-87.7112137,41.7112676,0],[-87.7125556,41.7112476,0],[-87.7126166,41.7131596,0],[-87.7210366,41.7130366,0],[-87.720426,41.691267,0],[-87.739718,41.6908927,0],[-87.7393646,41.6835016,0],[-87.7296546,41.6836696,0],[-87.7251415,41.6837306,0],[-87.7212574,41.6837631,0],[-87.7114197,41.6839646,0],[-87.7114345,41.6820699,0],[-87.7112497,41.6820486,0],[-87.7112347,41.6816656,0],[-87.7115087,41.6816606,0],[-87.7114917,41.6812246,0],[-87.7113077,41.6812276,0],[-87.7113134,41.6804711,0],[-87.7053212,41.6805821,0],[-87.705318,41.6841994,0],[-87.7005511,41.6843231,0],[-87.7005092,41.686137,0],[-87.6993515,41.6861721,0],[-87.6993786,41.6877956,0],[-87.6957318,41.6877697,0],[-87.6956469,41.6842122,0],[-87.6858757,41.6843386,0],[-87.6856094,41.6803541,0],[-87.6858383,41.6785409,0],[-87.6863608,41.6771896,0],[-87.6807178,41.6772563,0],[-87.6789305,41.6772078,0],[-87.6751843,41.6772708,0],[-87.6686592,41.6773864,0],[-87.6678098,41.6774298,0],[-87.6683267,41.6760056,0],[-87.6672457,41.6757816,0],[-87.6666442,41.6774428,0],[-87.6613698,41.6775288,0],[-87.6610047,41.6702839,0],[-87.6517571,41.6703005,0],[-87.6417966,41.670498,0],[-87.6416719,41.6668221,0],[-87.6415205,41.6632789,0],[-87.6471747,41.663242,0],[-87.6470519,41.6617542,0],[-87.6469018,41.6575106,0],[-87.6471838,41.6574886,0],[-87.6471788,41.6568936,0],[-87.6491718,41.6564206,0],[-87.6490717,41.6558236,0],[-87.6480958,41.6560606,0],[-87.6477088,41.6563046,0],[-87.6438798,41.6567374,0],[-87.6435148,41.6567634,0],[-87.6434066,41.6566246,0],[-87.6431053,41.6567022,0],[-87.6429543,41.6567334,0],[-87.6426851,41.6567292,0],[-87.6422301,41.6568193,0],[-87.6417808,41.6568006,0],[-87.6412988,41.6568366,0],[-87.6409388,41.6570136,0],[-87.6399588,41.6566166,0],[-87.6391388,41.6565516,0],[-87.6373818,41.6564126,0],[-87.6365348,41.6569686,0],[-87.6365338,41.6563106,0],[-87.6341116,41.6562479,0],[-87.6331758,41.6563686,0],[-87.6324869,41.6563315,0],[-87.6316868,41.6565466,0],[-87.6312159,41.6569548,0],[-87.6297721,41.657656,0],[-87.6284031,41.6583297,0],[-87.6278112,41.6589017,0],[-87.6264147,41.6598997,0],[-87.6246238,41.6607784,0],[-87.6242125,41.6609327,0],[-87.62344,41.661139,0],[-87.621974,41.661162,0],[-87.6209082,41.6609243,0],[-87.6204571,41.6605139,0],[-87.620165,41.6601364,0],[-87.6201089,41.6597268,0],[-87.6205203,41.6587497,0],[-87.6176113,41.6588137,0],[-87.6188003,41.6538017,0],[-87.6206123,41.6498957,0],[-87.6176803,41.6495567,0],[-87.6172083,41.6497287,0],[-87.617228,41.644585,0],[-87.606457,41.6446113,0],[-87.6005276,41.6446032,0],[-87.5991551,41.644601,0],[-87.597829,41.644619,0],[-87.5978293,41.6481496,0],[-87.5953316,41.6486886,0],[-87.5940764,41.6489412,0],[-87.592714,41.6489854,0],[-87.5914485,41.6488206,0],[-87.590505,41.6483831,0],[-87.5900449,41.6481154,0],[-87.5883832,41.6464687,0],[-87.5867586,41.6447868,0],[-87.5865717,41.6444037,0],[-87.5803832,41.6442314,0],[-87.5246479,41.6440334,0],[-87.5248994,41.6741117,0],[-87.5245274,41.7028276,0],[-87.5364573,41.7140971,0],[-87.5401772,41.7157408,0],[-87.5424813,41.7173445,0],[-87.5472292,41.7209518,0],[-87.5512048,41.7248869,0],[-87.5567482,41.7287813,0],[-87.5623672,41.7328122,0],[-87.5641146,41.7340229,0],[-87.5664845,41.735738,0],[-87.5687144,41.7373906,0],[-87.5772747,41.7435263,0],[-87.5993352,41.7594197,0],[-87.6101981,41.7672445,0],[-87.6167029,41.7719165,0],[-87.619484,41.7739925,0],[-87.6204341,41.7745176,0],[-87.6216845,41.7749706,0],[-87.6240567,41.7749245,0],[-87.6260392,41.7749835,0],[-87.6270564,41.7752025,0],[-87.6282211,41.7756736,0],[-87.6298159,41.7768966,0],[-87.6310126,41.7790634,0],[-87.6316523,41.8090883,0],[-87.6651695,41.8085514,0],[-87.6659101,41.8429347,0],[-87.6658875,41.8448567,0],[-87.663433,41.8447528,0],[-87.6610978,41.8457374,0],[-87.6568682,41.8483354,0],[-87.6533687,41.8479614,0],[-87.6464941,41.8491601,0],[-87.6471745,41.8743298,0],[-87.6386033,41.874445,0],[-87.6359468,41.8744658,0],[-87.6376289,41.8771747,0],[-87.6380029,41.8787784,0],[-87.6385051,41.88052,0],[-87.6384077,41.8830041,0],[-87.6378535,41.8856016,0],[-87.637986,41.886346,0],[-87.6358104,41.8876746,0],[-87.6271638,41.8878499,0],[-87.6251981,41.8890073,0],[-87.5973764,41.888967,0],[-87.5992037,41.8968526,0],[-87.6100962,41.8967141,0],[-87.6124444,41.8941729,0],[-87.6143052,41.8946912,0],[-87.6190845,41.9013426,0],[-87.6223225,41.9022666,0],[-87.6240265,41.9102976,0],[-87.6193805,41.9137296,0],[-87.6246886,41.9156906,0],[-87.6306466,41.9388916,0],[-87.6405155,41.9567866,0],[-87.6306597,41.9622029,0]]]]}},{"type":"Feature","properties":{"name":"Line 1","styleUrl":"#line-000000-6425-nodesc","stroke-opacity":1,"stroke":"#000000","stroke-width":6.425},"geometry":{"type":"MultiPolygon","coordinates":[[[[-87.8036999,41.8503999,0],[-87.7736139,41.8509386,0],[-87.7395567,41.8513373,0],[-87.7401439,41.8659615,0],[-87.7740966,41.8655099,0],[-87.7743098,41.8710621,0],[-87.7692793,41.8710389,0],[-87.7645653,41.8714761,0],[-87.7615678,41.8716575,0],[-87.7392991,41.8718262,0],[-87.7375843,41.8723205,0],[-87.7359981,41.8731183,0],[-87.7335447,41.8738254,0],[-87.707877,41.874217,0],[-87.6985923,41.8755004,0],[-87.6863751,41.8756375,0],[-87.6865216,41.8846247,0],[-87.6669367,41.8853116,0],[-87.6676352,41.9063815,0],[-87.6678832,41.916131,0],[-87.6678411,41.9172709,0],[-87.6683297,41.9191421,0],[-87.6687003,41.9215083,0],[-87.6681867,41.9240041,0],[-87.668671,41.936135,0],[-87.669066,41.94881,0],[-87.669231,41.955969,0],[-87.669325,41.958767,0],[-87.669339,41.961115,0],[-87.6693,41.961684,0],[-87.630852,41.962459,0],[-87.64385,41.970853,0],[-87.648905,41.981194,0],[-87.652838,41.990134,0],[-87.663458,42.020008,0],[-87.668688,42.030546,0],[-87.671515,42.046183,0],[-87.68061,42.078221,0],[-87.709211,42.093636,0],[-87.727968,42.11274,0],[-87.7577543,42.1521762,0],[-87.8794606,42.1528846,0],[-87.9184709,42.1530633,0],[-88.0009982,42.153719,0],[-88.1222797,42.1540437,0],[-88.238449,42.154284,0],[-88.238291,42.066976,0],[-88.263645,42.066892,0],[-88.2632812,41.9922312,0],[-87.9398186,41.9935409,0],[-87.9393552,41.9584657,0],[-87.9203198,41.9549932,0],[-87.9202335,41.9327429,0],[-87.919892,41.908364,0],[-87.9193221,41.8477079,0],[-87.8859678,41.8485668,0],[-87.8526127,41.849484,0],[-87.8036999,41.8503999,0]]]]}},{"type":"Feature","properties":{"name":"Local 4","styleUrl":"#line-7CB342-6000-nodesc","stroke-opacity":1,"stroke":"#7cb342","stroke-width":6},"geometry":{"type":"MultiPolygon","coordinates":[[[[-87.524064,41.706718,0],[-87.523859,41.731461,0],[-87.527655,41.734324,0],[-87.529734,41.748522,0],[-87.544023,41.753607,0],[-87.539601,41.757926,0],[-87.545116,41.762071,0],[-87.548732,41.76043,0],[-87.561011,41.765243,0],[-87.555307,41.766049,0],[-87.566426,41.775177,0],[-87.57935,41.794344,0],[-87.568646,41.795033,0],[-87.568241,41.797641,0],[-87.578914,41.798112,0],[-87.578586,41.803465,0],[-87.583751,41.807283,0],[-87.596178,41.824344,0],[-87.605013,41.835626,0],[-87.608701,41.850744,0],[-87.603465,41.853277,0],[-87.604409,41.867316,0],[-87.615395,41.867906,0],[-87.61591,41.88179,0],[-87.611876,41.882469,0],[-87.611275,41.888516,0],[-87.625133,41.8888355,0],[-87.6274871,41.8874749,0],[-87.6341222,41.8874737,0],[-87.6357677,41.887289,0],[-87.6374908,41.886109,0],[-87.638051,41.882351,0],[-87.6380481,41.8799072,0],[-87.6373799,41.8774634,0],[-87.6368625,41.8760824,0],[-87.6357765,41.8744139,0],[-87.6470296,41.8742899,0],[-87.646812,41.861275,0],[-87.646408,41.849104,0],[-87.653334,41.8478488,0],[-87.6567636,41.8482235,0],[-87.6607314,41.8457969,0],[-87.6634545,41.8446969,0],[-87.6658875,41.8448567,0],[-87.6657913,41.842812,0],[-87.6649222,41.8086681,0],[-87.6315866,41.8091121,0],[-87.6307915,41.779299,0],[-87.6300944,41.777725,0],[-87.6293808,41.7769489,0],[-87.6286672,41.776493,0],[-87.6277343,41.7758455,0],[-87.626737,41.775398,0],[-87.6259221,41.7751745,0],[-87.6250642,41.775119,0],[-87.6215571,41.775032,0],[-87.6201564,41.7745825,0],[-87.6190131,41.773845,0],[-87.617166,41.772491,0],[-87.6116174,41.7684769,0],[-87.6025493,41.7619209,0],[-87.5929262,41.7549479,0],[-87.5879589,41.7513739,0],[-87.5839693,41.7485029,0],[-87.5509939,41.7249807,0],[-87.5489066,41.7230188,0],[-87.5470448,41.7210008,0],[-87.5417544,41.7170296,0],[-87.5400916,41.7158604,0],[-87.5363903,41.7141631,0],[-87.5276673,41.7061294,0],[-87.5249004,41.70331,0],[-87.525077,41.705825,0],[-87.524064,41.706718,0]]]]}},{"type":"Feature","properties":{"name":"Local 5","styleUrl":"#line-0288D1-5069-nodesc","stroke-opacity":1,"stroke":"#0288d1","stroke-width":5.069},"geometry":{"type":"MultiPolygon","coordinates":[[[[-87.800743,41.773778,0],[-87.8019675,41.798129,0],[-87.7970182,41.7996348,0],[-87.7527327,41.8002468,0],[-87.753098,41.813302,0],[-87.7446586,41.8163178,0],[-87.7447616,41.8220908,0],[-87.7385769,41.8221788,0],[-87.739562,41.8512653,0],[-87.7736139,41.8509386,0],[-87.8036999,41.8503999,0],[-87.8456929,41.8496059,0],[-87.8615391,41.8491563,0],[-87.8903692,41.8484048,0],[-87.9193221,41.8477079,0],[-87.914273,41.717156,0],[-87.9807472,41.687784,0],[-88.0301857,41.6861174,0],[-88.027927,41.648773,0],[-87.912212,41.651235,0],[-87.908987,41.556884,0],[-87.8507894,41.5577066,0],[-87.8216901,41.5582042,0],[-87.7925796,41.5586062,0],[-87.7921629,41.5429105,0],[-87.7920176,41.5423182,0],[-87.7918831,41.5418946,0],[-87.7915946,41.5413902,0],[-87.7913382,41.5409661,0],[-87.7907612,41.5400336,0],[-87.7904936,41.5394443,0],[-87.790349,41.5389349,0],[-87.7902688,41.5384294,0],[-87.790254,41.5043363,0],[-87.7902858,41.487101,0],[-87.7902747,41.4698717,0],[-87.7873096,41.4698597,0],[-87.7871532,41.4589633,0],[-87.7870236,41.4480549,0],[-87.7867137,41.4262883,0],[-87.7861669,41.3827268,0],[-87.7859988,41.3718365,0],[-87.7858737,41.3609562,0],[-87.785452,41.3392197,0],[-87.7852184,41.3283389,0],[-87.7851501,41.3256175,0],[-87.7850999,41.322896,0],[-87.7850157,41.3174581,0],[-87.7846666,41.2958181,0],[-87.5267316,41.2982083,0],[-87.525566,41.493682,0],[-87.5253296,41.5017638,0],[-87.525521,41.522898,0],[-87.525496,41.535577,0],[-87.525346,41.556108,0],[-87.525282,41.576604,0],[-87.5246479,41.6440334,0],[-87.5556312,41.6441345,0],[-87.5711229,41.644206,0],[-87.5788688,41.644233,0],[-87.5803832,41.6442314,0],[-87.5865717,41.6444037,0],[-87.5867586,41.6447868,0],[-87.5900449,41.6481154,0],[-87.590505,41.6483831,0],[-87.5914485,41.6488206,0],[-87.592714,41.6489854,0],[-87.5940764,41.6489412,0],[-87.5978293,41.6481496,0],[-87.597829,41.644619,0],[-87.617228,41.644585,0],[-87.6172083,41.6497287,0],[-87.6176803,41.6495567,0],[-87.6206123,41.6498957,0],[-87.6188003,41.6538017,0],[-87.6176113,41.6588137,0],[-87.6205203,41.6587497,0],[-87.6201089,41.6597268,0],[-87.620165,41.6601364,0],[-87.6204571,41.6605139,0],[-87.6209082,41.6609243,0],[-87.621974,41.661162,0],[-87.62344,41.661139,0],[-87.6242125,41.6609327,0],[-87.6257603,41.6602524,0],[-87.6264147,41.6598997,0],[-87.6278112,41.6589017,0],[-87.6284031,41.6583297,0],[-87.6312159,41.6569548,0],[-87.6316188,41.6565665,0],[-87.6324869,41.6563315,0],[-87.6331758,41.6563686,0],[-87.6341116,41.6562479,0],[-87.6365338,41.6563106,0],[-87.6365348,41.6569686,0],[-87.6373818,41.6564126,0],[-87.6399588,41.6566166,0],[-87.6409388,41.6570136,0],[-87.641298
